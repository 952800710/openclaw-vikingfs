name: Test (Simple)

on:
  push:
    branches: [ master, main ]
  pull_request:
    branches: [ master, main ]
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: ["3.9", "3.10", "3.11"]

    steps:
    - uses: actions/checkout@v4
    
    - name: Set up Python ${{ matrix.python-version }}
      uses: actions/setup-python@v5
      with:
        python-version: ${{ matrix.python-version }}
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -e .
    
    - name: Run basic checks
      run: |
        python -c "from viking.integration.bridge_v2 import OpenClawVikingBridgeV2; print('Import successful')"
        echo "✅ Python module imports work correctly"
    
    - name: Run demo script
      run: |
        python viking/tools/real_demo.py --dry-run
        echo "✅ Demo script runs without errors"
    
    - name: Check project structure
      run: |
        echo "Checking project structure..."
        test -f setup.py && echo "✅ setup.py exists"
        test -f README.md && echo "✅ README.md exists"
        test -f requirements.txt && echo "✅ requirements.txt exists"
        test -d viking && echo "✅ viking/ directory exists"
        test -d viking/integration && echo "✅ integration/ directory exists"
        test -f viking/integration/bridge_v2.py && echo "✅ bridge_v2.py exists"
        echo "✅ All required files and directories are present"